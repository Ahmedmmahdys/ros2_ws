<launch>
  <arg name="frame_id" default="map" description="Frame used by RCAN executor and panel publishers."/>
  <arg name="panel_source" default="yaml" description="Select 'yaml' or 'neo4j' panel publisher."/>
  <arg name="panel_chain_file" default="$(find-pkg-share crane_builder)/config/example_panels.yaml"/>

  <arg name="neo4j_uri" default="neo4j+s://ae1083a1.databases.neo4j.io"/>
  <arg name="neo4j_user" default="neo4j"/>
  <arg name="neo4j_pass" default="aVbfVqk-XZ17tl0UOjRLwpfmbV-tCY7JUe7RjnaBbVc"/>
  <arg name="neo4j_database" default=""/>
  <arg name="neo4j_relation" default="NEXT_1"/>
  <arg name="neo4j_publish_period" default="1.0"/>
  <arg name="host_selector" default="" description="Head IFC GUID for the desired host chain."/>

  <node pkg="rcan_executor" executable="rcan_executor" name="rcan_executor" output="screen">
    <param name="frame_id" value="$(var frame_id)"/>
  </node>

  <group if="$(eval panel_source == 'yaml')">
    <node pkg="crane_builder" executable="panel_chain_executor" name="panel_chain_executor" output="screen">
      <param name="panel_chain_file" value="$(var panel_chain_file)"/>
      <param name="frame_id" value="$(var frame_id)"/>
    </node>
  </group>

  <group if="$(eval panel_source == 'neo4j')">
    <node pkg="crane_builder" executable="neo4j_panel_chain_executor" name="neo4j_panel_chain_executor" output="screen">
      <param name="uri" value="$(var neo4j_uri)"/>
      <param name="user" value="$(var neo4j_user)"/>
      <param name="password" value="$(var neo4j_pass)"/>
      <param name="database" value="$(var neo4j_database)"/>
      <param name="chain_relation" value="$(var neo4j_relation)"/>
      <param name="publish_period" value="$(var neo4j_publish_period)"/>
      <param name="host_selector" value="$(var host_selector)"/>
      <param name="frame_id" value="$(var frame_id)"/>
    </node>
  </group>
</launch>
